/*!
 *
 * Bryntum Calendar 5.3.5 (TRIAL VERSION)
 *
 * Copyright(c) 2023 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
function _cmpa(){const ab=['expandByKey','ancestorsExpanded','defaults','isActionable','scrollRowIntoView','element','find','isArray','isTogglingNode','expandNode','rowIndex','focusCell','push','To\x20use\x20the\x20tree\x20feature,\x20one\x20column\x20should\x20be\x20configured\x20with\x20`type:\x20\x27tree\x27`','40DGexhE','store','expandedFolderIconCls','toggleAllNodes','expandOrCollapseAll','expandAll','modelClass','1110428KiUltg','suspendRefresh','b-tree-parent-cell','classList','div','elements','setAttribute','remove','b-tree','object','expandTo','setData','1077070qMVmhE','detachListeners','length','onLoadChildren','isLoadingChildren','isDestroyed','assignCls','doDisable','construct','collapseByKey','subGrid','children','$name','addCls','.b-tree-expander','removeCls','mixin','collapsed','collapse','b-tree-parent-row','b-tree-collapsed','_treeColumn','htmlEncode','info','_$name','TreeColumn','Tree','getCurrentConfig','columns','call','43317xKVmzy','expandIconCls','requestAnimationFrame','closest','record','getCellDataFromEvent','bind','expand','expandIfSingleColumn','isRow','style','isTreeColumn','renderer','registerFeature','onBeforeToggleNode','toggleCollapse','resolve','getRowFor','getCell','isParent','onElementClick','44ztDqcf','href','idField','161696AatVlA','treeColumn','b-tree-cell-value','client','shouldHtmlEncode','rootNode','trigger','expandOnCellClick','subGrids','removeAttribute','collapseIconCls','onBeforeLoadChildren','b-loading-children','.b-tree-cell-value','refresh','onElementPointerUp','count','unshift','b-icon\x20b-icon-tree-leaf','rendererHtml','parent','beforeToggleNode','collapseIfSingleColumn','133PfjCjc','hiddenByCollapse','resumeRefresh','deselectAll','b-icon\x20b-icon-tree-collapse','column','assign','aria-expanded','add','isExpanded','treeRenderer','innerHTML','Tree\x20feature\x20cannot\x20be\x20disabled','isRoot','getById','pluginConfig','padding-inline-start:','b-toggling-node','fields','originalRenderer','join','splice','exposeProperties','rowManager','iconCls','b-tree-expanded','Grid','setAttributes','597363DfJWNS','toggleCollapseByKey','b-icon\x20b-icon-tree-expand','instanceMeta','b-tree-cell-inner','bindStore','refreshRows','isLeaf','tree','3NIWykL','target','collapseNode','19878ACSTpo','includes','collapseAll','preventDefault','traverse','leafIconCls','54310jagyVv','all'];_cmpa=function(){return ab;};return _cmpa();}(function(a,b){const c=a();function E(a,b){return _cmpb(a- -0x1da,b);}while(!![]){try{const d=parseInt(E(0x38,0x4))/0x1*(parseInt(E(-0x4,0x4a))/0x2)+-parseInt(E(0x2f,0x1d))/0x3+parseInt(E(-0x46,-0x91))/0x4+-parseInt(E(-0x3a,-0x72))/0x5+-parseInt(E(0x3b,0x78))/0x6*(-parseInt(E(0x13,0x44))/0x7)+parseInt(E(-0x4d,-0x1b))/0x8*(parseInt(E(-0x1c,0x2d))/0x9)+parseInt(E(0x41,0x2e))/0xa*(parseInt(E(-0x7,0x10))/0xb);if(d===b){break;}else{c['push'](c['shift']());}}catch(e){c['push'](c['shift']());}}}(_cmpa,0x34550));import{DomHelper,InstancePlugin,Delayable}from'./Editor.js';import{ColumnStore,Column,GridFeatureManager}from'./GridBase.js';let currentParentHasIcon=![];class TreeColumn extends Column{static [_cmpF(0x349,0x36e)]=_cmpF(0x356,0x359);static ['type']=_cmpF(0x3ae,0x3bc);static get[_cmpF(0x31e,0x30d)](){return{'tree':!![],'hideable':![],'minWidth':0x96};}static get[_cmpF(0x39c,0x381)](){function G(a,b){return _cmpF(a-0x185,b);}return[{'name':G(0x4e1,0x4f6),'defaultValue':G(0x52d,0x525)},{'name':G(0x502,0x506),'defaultValue':G(0x513,0x4d1)},{'name':'collapsedFolderIconCls'},{'name':G(0x4b1,0x4f4)},{'name':'indentSize','defaultValue':1.7},{'name':'leafIconCls','defaultValue':G(0x50a,0x518)},{'name':'editTargetSelector','defaultValue':G(0x505,0x53f)},'renderer'];}constructor(a,b){super(...arguments);const c=this;c[H(0x299,0x26c)]=c[H(0x275,0x235)];c[H(0x25e,0x296)]('htmlEncode',![]);if(c[H(0x289,0x278)]){c['originalRenderer']=c[H(0x289,0x2bd)];}function H(a,b){return _cmpF(a- -0xde,b);}c[H(0x289,0x24c)]=c[H(0x2b6,0x29b)][H(0x283,0x254)](c);}[_cmpF(0x394,0x3e1)](a){const b=this,{grid:c,column:d,cellElement:e,row:f,record:g,isExport:h}=a,i=g[I(0x342,0x34c)](c[I(0x2c4,0x276)]),j=!g[I(0x346,0x373)]&&i[I(0x2e7,0x2fb)],k={'className':I(0x30e,0x2c5)},l=[k],m={'className':I(0x343,0x361),'tag':g[I(0x30a,0x32b)]?'a':I(0x2ce,0x2fb),'href':g[I(0x30a,0x2e1)],'target':g[I(0x349,0x338)],'children':l},n={'b-tree-parent-row':0x0,'b-tree-collapsed':0x0,'b-tree-expanded':0x0,'b-loading-children':0x0};let o,p,{value:q}=a;if(b[I(0x336,0x31d)]){var r;const w=b[I(0x336,0x331)](a),x=(r=c['hasFrameworkRenderer'])===null||r===void 0x0?void 0x0:r['call'](c,{'cellContent':w,'column':d});o=typeof w===I(0x2d3,0x2e3)&&!x;q=x?'':w===![]?e[I(0x32e,0x372)]:w;a[I(0x31f,0x347)]=w;}if(!o){q=String(q??'');}if(h){return q;}if(!g[I(0x346,0x339)]){var s;const y=!g[I(0x32c,0x313)](c[I(0x2c4,0x2c1)]),z=y?b['expandIconCls']:b[I(0x316,0x2cc)],A=y?b['collapsedFolderIconCls']:b[I(0x2c5,0x2b6)];n[I(0x2e9,0x2cd)]=0x1;n[I(0x2ea,0x2f4)]=y;n[I(0x33c,0x368)]=!y;n[I(0x318,0x2ee)]=i[I(0x2da,0x2e8)];e[I(0x2cd,0x2e1)]['add'](I(0x2cc,0x312));l[I(0x31d,0x353)]({'tag':'i','className':{'b-tree-expander':0x1,[z]:0x1,'b-empty-parent':!i[I(0x2da,0x328)]&&g['children']!==!![]&&!((s=g[I(0x2e1,0x2e8)])!==null&&s!==void 0x0&&s[I(0x2d8,0x311)])}});currentParentHasIcon=p=a['iconCls']||g[I(0x33b,0x33b)]||A;}else{e[I(0x2cd,0x2e0)][I(0x32b,0x379)]('b-tree-leaf-cell');p=a[I(0x33b,0x31f)]||g['iconCls']||b[I(0x350,0x35e)];}function I(a,b){return _cmpF(a- -0x67,b);}if(p){l[I(0x338,0x33a)](l[I(0x2d8,0x2ce)]-0x1,0x0,{'tag':'i','className':{'b-tree-icon':0x1,[p]:0x1}});}if(f[I(0x2fd,0x342)]){f[I(0x2dc,0x2e9)](n);if(!g[I(0x346,0x320)]){f[I(0x2d0,0x284)](I(0x32a,0x376),!j);if(j){f[I(0x315,0x2db)]('aria-owns');}else{for(const B in c[I(0x314,0x2f2)]){var t,u;const C=f[I(0x2cf,0x30f)][B];DomHelper[I(0x33e,0x33b)](C,{'aria-owns':(t=g[I(0x2e1,0x313)])!==null&&t!==void 0x0&&t[I(0x2d8,0x300)]?(u=g[I(0x2e1,0x2db)])===null||u===void 0x0?void 0x0:u['map'](D=>c['id']+'-'+B+'-'+D['id'])[I(0x337,0x382)]('\x20'):null});}}}}if(Array['isArray'](q)){k['children']=q;}else if(o){Object[I(0x329,0x33f)](k,q);}else if(b['shouldHtmlEncode']||!q[I(0x34c,0x334)]('<')){k[I(0x2e1,0x303)]=[q];}else{k['html']=q;}const v=g['childLevel']*b['indentSize']+(g['isLeaf']?currentParentHasIcon?0x2:p?0.5:0.4:0x0);m[I(0x2fe,0x301)]=I(0x333,0x31e)+v+'em';return m;}['getCurrentConfig'](a){const b=super[J(0x410,0x457)](a);function J(a,b){return _cmpF(a-0xb8,b);}b[J(0x41f,0x45d)]=this['originalRenderer'];return b;}}ColumnStore['registerColumnType'](TreeColumn,!![]);TreeColumn[_cmpF(0x3a0,0x378)]();TreeColumn[_cmpF(0x355,0x328)]=_cmpF(0x356,0x329);const immediatePromise=Promise[_cmpF(0x36b,0x3ab)]();function _cmpb(a,b){const c=_cmpa();_cmpb=function(d,e){d=d-0x181;let f=c[d];return f;};return _cmpb(a,b);}class Tree extends InstancePlugin[_cmpF(0x34d,0x321)](Delayable){static [_cmpF(0x349,0x323)]=_cmpF(0x357,0x3a1);static ['configurable']={'expandOnCellClick':![],'keyMap':{'\x20':_cmpF(0x3a7,0x359),'ArrowRight':_cmpF(0x363,0x319),'Shift+ArrowRight':'expandByKey','ArrowLeft':'collapseIfSingleColumn','Shift+ArrowLeft':_cmpF(0x346,0x303)}};static get[_cmpF(0x399,0x3ae)](){function K(a,b){return _cmpF(b-0x1d5,a);}return{'assign':['collapseAll','expandAll',K(0x556,0x524),K(0x573,0x537),K(0x503,0x510),K(0x535,0x53f)],'chain':['onElementPointerUp','onElementClick',K(0x5ab,0x580)]};}[_cmpF(0x345,0x37f)](a,b){super[L(0x68,0xa8)](a,b);if(!this[L(0xb8,0xd7)]){console[L(0x72,0xb7)](L(0x5d,0x8c));}function L(a,b){return _cmpF(b- -0x29d,a);}a[L(0x88,0x8e)]&&this[L(0xef,0x10e)](a[L(0xaf,0x8e)]);}[_cmpF(0x344,0x337)](a){function M(a,b){return _cmpF(a- -0x1aa,b);}if(a){throw new Error(M(0x1ec,0x1f0));}}get['store'](){function N(a,b){return _cmpF(b- -0x318,a);}return this[N(0x1b,0x5e)][N(0x7,0x13)];}get[_cmpF(0x374,0x3c3)](){function O(a,b){return _cmpF(a-0x119,b);}const a=this,{columns:b}=a['client'];if(!a[O(0x46b,0x420)]||!b[O(0x4cc,0x4b8)](a[O(0x46b,0x4af)])){a['_treeColumn']=b[O(0x43b,0x439)](c=>c[O(0x47f,0x4c9)]);}return a['_treeColumn'];}[_cmpF(0x3ab,0x3e5)](a){function P(a,b){return _cmpF(a-0xbb,b);}this[P(0x3f9,0x3e9)](P(0x3e6,0x416));a['ion']({'name':P(0x3e6,0x435),'beforeLoadChildren':P(0x439,0x3f7),'loadChildren':P(0x3fb,0x405),'loadChildrenException':'onLoadChildrenException','beforeToggleNode':P(0x424,0x451),'thisObj':this});}async['toggleCollapse'](a,b){if(a==null){throw new Error('Tree#toggleCollapse\x20must\x20be\x20passed\x20a\x20record');}function Q(a,b){return _cmpF(b-0x190,a);}const c=this,{store:d,client:e}=c,{rowManager:f}=e,g=d[Q(0x50c,0x528)](a),h=g[Q(0x518,0x539)](d);if(await d[Q(0x530,0x4fa)](g,b)){const i=f[Q(0x526,0x4fc)](g);if(i&&g[Q(0x566,0x54b)]()){const j=c[Q(0x4da,0x504)]&&!c[Q(0x4df,0x504)][Q(0x526,0x4d7)][Q(0x52d,0x4de)]&&i[Q(0x531,0x4fd)](c[Q(0x4ba,0x504)]['id']);j&&i['renderCell'](j);}if(!c[Q(0x4a0,0x4b4)]){e['element'][Q(0x4a7,0x4c4)][Q(0x51b,0x522)](Q(0x537,0x52b));c[Q(0x4bb,0x4b4)]=!![];c[Q(0x53c,0x4ed)](()=>{function R(a,b){return Q(b,a- -0x5f1);}e[R(-0x140,-0xfb)][R(-0x12d,-0xe6)][R(-0x129,-0xf4)](R(-0xc6,-0xb9));c['isTogglingNode']=![];});}e[Q(0x4f9,0x509)](h[Q(0x490,0x4de)]?Q(0x51f,0x541):Q(0x496,0x4b5),{'record':g});e[Q(0x4f2,0x509)]('toggleNode',{'record':g,'collapse':h[Q(0x4fa,0x4de)]});}}async[_cmpF(0x34f,0x345)](a){function S(a,b){return _cmpF(a-0x4b,b);}return this[S(0x3b5,0x36c)](a,!![]);}async['expand'](a){function T(a,b){return _cmpF(a- -0x135,b);}return this[T(0x235,0x252)](a,![]);}[_cmpF(0x369,0x33a)]({record:a,collapse:b}){function U(a,b){return _cmpF(b-0x167,a);}this[U(0x4d2,0x4dd)][U(0x51c,0x4e0)](U(0x4ac,0x4ef),{'record':a,'collapse':b});}[_cmpF(0x37e,0x3b0)]({source:a,params:b}){const c=a['getById'](b[a['modelClass']['idField']]),d=this[V(0x537,0x4e8)][V(0x4d5,0x513)][V(0x4aa,0x4de)](c);function V(a,b){return _cmpF(b-0x172,a);}d===null||d===void 0x0?void 0x0:d[V(0x487,0x4bc)]('b-loading-children');}[_cmpF(0x340,0x337)]({source:a,params:b}){const c=a[W(0x277,0x285)](b[a[W(0x22e,0x21d)][W(0x280,0x25f)]]),d=this[W(0x237,0x263)][W(0x24b,0x28e)][W(0x2a1,0x259)](c);function W(a,b){return _cmpF(b- -0x113,a);}d===null||d===void 0x0?void 0x0:d[W(0x216,0x239)](W(0x22e,0x26c));}['onLoadChildrenException']({record:a}){const b=this[X(-0x63,-0x91)][X(-0xa0,-0x66)]['getRowFor'](a);function X(a,b){return _cmpF(b- -0x407,a);}b===null||b===void 0x0?void 0x0:b['removeCls'](X(-0xc2,-0x88));}async[_cmpF(0x32e,0x32d)](a=!![],b=this[_cmpF(0x32b,0x313)][_cmpF(0x378,0x33d)]){const {client:c,store:d}=this,e=[],f=[];c[Y(-0xc9,-0x102)]('beforeToggleAllNodes',{'collapse':a});d['suspendEvents']();function Y(a,b){return _cmpF(b- -0x47b,a);}d[Y(-0xf9,-0xc5)](g=>{const h=g[Z(0x22f,0x25b)](d);function Z(a,b){return Y(b,a-0x301);}if(!g['isLeaf']){if(a&&!h[Z(0x1d4,0x222)]){this[Z(0x1f0,0x1e4)](g,!![]);f[Z(0x1ae,0x18d)](...g['children']);}else if(!a&&h['collapsed']){if(Array[Z(0x1a9,0x1c9)](g[Z(0x1ce,0x1be)])){f[Z(0x1ae,0x18d)](...g[Z(0x1ce,0x1e0)]);}e[Z(0x1ae,0x1d1)](this[Z(0x1f0,0x1f9)](g,![]));}}},b,b===d[Y(-0x13d,-0x103)]);d['resumeEvents']();return(a?immediatePromise:Promise[Y(-0xd5,-0xc2)](e))['then'](()=>{c['refreshRows'](a);function a0(a,b){return Y(b,a-0x22);}if(f[a0(-0x11a,-0x110)]){if(a){d['trigger'](a0(-0x121,-0xf4),{'records':f,'isCollapse':!![],'isCollapseAll':!![]});}else{d[a0(-0xe0,-0xd8)](a0(-0xc7,-0x79),{'records':f,'isExpand':!![],'isExpandAll':!![]});}}c[a0(-0xe0,-0xf2)](a0(-0x12c,-0x175),{'collapse':a});});}async[_cmpF(0x3b4,0x368)](){function a1(a,b){return _cmpF(b- -0x3d8,a);}return this[a1(-0xf4,-0xaa)](!![]);}async[_cmpF(0x32f,0x36f)](){function a2(a,b){return _cmpF(a- -0x2ef,b);}return this[a2(0x3f,0x44)](![]);}async[_cmpF(0x33b,0x330)](a,b=!![]){const c=this,{store:d,client:e}=c;if(Array[a3(0x2cb,0x2d5)](a)){if(a[a3(0x2e7,0x2e0)]>0x0){e[a3(0x2da,0x2f1)]();for(let l=a[a3(0x2e7,0x2e5)]-0x1;l>=0x0;l--){var f;const m=d[a3(0x340,0x315)](a[l]);if(l===0x0){var g;(g=e[a3(0x334,0x37d)])===null||g===void 0x0?void 0x0:g[a3(0x302,0x2d1)](e);e[a3(0x349,0x30d)][a3(0x329,0x350)]();}await((f=c[a3(0x2e3,0x32f)])===null||f===void 0x0?void 0x0:f[a3(0x302,0x33c)](c,m,l===0x0));}}return;}function a3(a,b){return _cmpF(a- -0x58,b);}const h=d[a3(0x340,0x2fc)](a);if(h[a3(0x351,0x302)](c['store'])[a3(0x333,0x31f)]===![]){return;}if(!h[a3(0x363,0x3ab)]()){var j,k;const n=[];for(let o=h[a3(0x32f,0x307)];o&&!o[a3(0x33f,0x2fe)];o=o[a3(0x32f,0x2eb)]){if(!o['isExpanded'](d)){n[a3(0x32c,0x342)](o);}}e[a3(0x2da,0x2b6)]();for(const p of n){if(!c['isDestroyed']){await c['toggleCollapse'](p,![]);}}(j=e[a3(0x334,0x325)])===null||j===void 0x0?void 0x0:j['call'](e);(k=e[a3(0x354,0x30a)])===null||k===void 0x0?void 0x0:k[a3(0x302,0x348)](e);}if(!c[a3(0x2ea,0x2bb)]&&b){await e[a3(0x2c8,0x317)](h);}}[_cmpF(0x382,0x3ae)](a){const b=this,c=a[a4(-0x31,-0x6f)],d=b[a4(-0xf1,-0xa9)][a4(-0xff,-0xbf)](a),e=c[a4(-0x77,-0xc1)](a4(-0x118,-0xd4));function a4(a,b){return _cmpF(b- -0x41f,a);}if(e||b[a4(-0xe6,-0xa5)]&&d!==null&&d!==void 0x0&&d[a4(-0x8d,-0xc0)][a4(-0xc5,-0xb1)]){b[a4(-0xd9,-0xb5)](d[a4(-0x10c,-0xc0)]);}}[_cmpF(0x36f,0x3b6)](a){function a5(a,b){return _cmpF(b- -0x57e,a);}if(a['target'][a5(-0x1f4,-0x220)]('.b-tree-expander')){a[a5(-0x1f1,-0x1c9)]();}}[_cmpF(0x3a7,0x378)](){function a6(a,b){return _cmpF(b-0x19d,a);}const {focusedCell:a}=this['client'];if((a===null||a===void 0x0?void 0x0:a[a6(0x4fc,0x4c3)])>-0x1&&!a[a6(0x4c9,0x4bc)]){this['toggleCollapse'](a['id']);return!![];}return![];}[_cmpF(0x363,0x337)](){function a7(a,b){return _cmpF(b- -0x4a4,a);}if(this[a7(-0x12b,-0x12e)]['columns'][a7(-0x166,-0x121)]===0x1){return this[a7(-0xf7,-0xea)]();}return![];}['expandByKey'](){function a8(a,b){return _cmpF(b- -0x349,a);}const a=this,{client:b}=a,{focusedCell:c}=b,d=c===null||c===void 0x0?void 0x0:c['record'];if(d&&c!==null&&c!==void 0x0&&c[a8(0x7,0x46)][a8(0x61,0x65)]&&d[a8(-0x19,0x25)]&&d[a8(0x16,0x60)](b[a8(-0x28,-0x1e)])['collapsed']){a[a8(0x1b,0x19)](d);return!![];}return![];}[_cmpF(0x389,0x33c)](){function a9(a,b){return _cmpF(a-0xdc,b);}if(this[a9(0x452,0x477)][a9(0x435,0x481)][a9(0x45f,0x443)]===0x1){return this[a9(0x422,0x43b)]();}return![];}[_cmpF(0x346,0x2f8)](){const a=this,{client:b}=a,{focusedCell:c}=b,d=c===null||c===void 0x0?void 0x0:c[aa(0xce,0xbe)];function aa(a,b){return _cmpF(a- -0x291,b);}if(c!==null&&c!==void 0x0&&c[aa(0xfe,0x126)][aa(0x11d,0x141)]&&d){if(d[aa(0xdd,0x12b)]&&!d[aa(0x118,0x132)](b[aa(0x9a,0x66)])[aa(0xbd,0xf2)]){a['collapse'](d);return!![];}if(d[aa(0xf6,0xcb)]&&!d[aa(0xf6,0xd9)][aa(0x106,0x13b)]){b[aa(0xfc,0x105)]();b[aa(0x96,0x49)]({'record':d[aa(0xf6,0x11a)],'column':c[aa(0xfe,0x116)]});return!![];}}return![];}}Tree['featureClass']=_cmpF(0x339,0x369);Tree[_cmpF(0x355,0x33f)]='Tree';GridFeatureManager[_cmpF(0x368,0x384)](Tree,![],_cmpF(0x3a4,0x358));GridFeatureManager[_cmpF(0x368,0x32b)](Tree,!![],'TreeGrid');function _cmpF(a,b){return _cmpb(a-0x19d,b);}export{Tree,TreeColumn};